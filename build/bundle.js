(()=>{"use strict";class t{static BTN_TYPE={CLEAN:"clean",PLUS:"plus",MINUS:"minus",MULT:"mult",DIVISION:"division",PERCENT:"percent",SIGN_CHANGE:"sign-change",ONE:"one",TWO:"two",THREE:"three",FOUR:"four",FIVE:"five",SIX:"six",SEVEN:"seven",EIGHT:"eight",NINE:"nine",NULL:"null",COMMA:"comma",CALC:"calc"};static CURR_NUM_TYPE={FIRST:"first",SECOND:"second",THIRD:"third"};static OP_TYPE={NONE:"none",PLUS:"plus",MINUS:"minus",MULT:"mult",DIVISION:"division"};static FULL_CALC_DONE="Full calculation done";static MULT_DIV_CALC_DONE="Mult or div calculation done";constructor(){this.resetAllValues()}cleanFirstNum(){this.firstNum="0"}cleanSecondNum(){this.secondNum="0"}cleanThirdNum(){this.thirdNum="0"}resetAllValues(){this.currNum=t.CURR_NUM_TYPE.FIRST,this.firstNum="0",this.firstOp=t.OP_TYPE.NONE,this.secondNum="",this.secondOp=t.OP_TYPE.NONE,this.thirdNum="",this.lastOp=t.OP_TYPE.NONE,this.lastNum=""}setPlusSign(){switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.PLUS;break;case t.CURR_NUM_TYPE.SECOND:if(this.secondNum)return this.calculateResult(),this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.PLUS,t.FULL_CALC_DONE;this.firstOp=t.OP_TYPE.PLUS;break;case t.CURR_NUM_TYPE.THIRD:return this.calculateResult(),t.FULL_CALC_DONE}}setMinusSign(){switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.MINUS;break;case t.CURR_NUM_TYPE.SECOND:if(this.secondNum)return this.calculateResult(),this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.MINUS,t.FULL_CALC_DONE;this.firstOp=t.OP_TYPE.MINUS;break;case t.CURR_NUM_TYPE.THIRD:return this.calculateResult(),t.FULL_CALC_DONE}}setMultSign(){switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.MULT;break;case t.CURR_NUM_TYPE.SECOND:if(this.secondNum){if(this.firstOp!==t.OP_TYPE.PLUS&&this.firstOp!==t.OP_TYPE.MINUS)return this.calculateResult(),this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.MULT,t.FULL_CALC_DONE;this.currNum=t.CURR_NUM_TYPE.THIRD,this.secondOp=t.OP_TYPE.MULT}else this.firstOp=t.OP_TYPE.MULT;break;case t.CURR_NUM_TYPE.THIRD:if(this.thirdNum){const i=Number(this.secondNum),s=Number(this.thirdNum);return i*s>=Number.MAX_SAFE_INTEGER?this.secondNum="Infinity":i*s<=Number.MIN_SAFE_INTEGER?this.secondNum="-Infinity":this.secondNum=(i*s).toString(),this.thirdNum="",this.currNum=t.CURR_NUM_TYPE.THIRD,this.secondOp=t.OP_TYPE.MULT,t.MULT_DIV_CALC_DONE}this.secondOp=t.OP_TYPE.MULT}}setDivisionSign(){switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.DIVISION;break;case t.CURR_NUM_TYPE.SECOND:if(this.secondNum){if(this.firstOp!==t.OP_TYPE.PLUS&&this.firstOp!==t.OP_TYPE.MINUS)return this.calculateResult(),this.currNum=t.CURR_NUM_TYPE.SECOND,this.firstOp=t.OP_TYPE.DIVISION,t.FULL_CALC_DONE;this.currNum=t.CURR_NUM_TYPE.THIRD,this.secondOp=t.OP_TYPE.DIVISION}else this.firstOp=t.OP_TYPE.DIVISION;break;case t.CURR_NUM_TYPE.THIRD:if(this.thirdNum)return this.secondNum=(Number(this.secondNum)/Number(this.thirdNum)).toString(),this.thirdNum="",this.currNum=t.CURR_NUM_TYPE.THIRD,this.secondOp=t.OP_TYPE.DIVISION,t.MULT_DIV_CALC_DONE;this.secondOp=t.OP_TYPE.DIVISION}}getValuePercent(){switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:this.firstNum=(Number(this.firstNum)/100).toString();break;case t.CURR_NUM_TYPE.SECOND:if(this.firstOp===t.OP_TYPE.PLUS||this.firstOp===t.OP_TYPE.MINUS)if(this.secondNum){const t=Number(this.firstNum),i=Number(this.secondNum);t*i/100>=Number.MAX_SAFE_INTEGER?this.secondNum="Infinity":t*i/100<=Number.MIN_SAFE_INTEGER?this.secondNum="-Infinity":this.secondNum=(t*i/100).toString()}else{const t=Number(this.firstNum);t*t/100>=Number.MAX_SAFE_INTEGER?this.secondNum="Infinity":t*t/100<=Number.MIN_SAFE_INTEGER?this.secondNum="-Infinity":this.secondNum=(t*t/100).toString()}else this.secondNum?this.secondNum=(Number(this.secondNum)/100).toString():this.secondNum=(Number(this.firstNum)/100).toString();break;case t.CURR_NUM_TYPE.THIRD:this.thirdNum=(Number(this.thirdNum)/100).toString()}}changeValueSign(){switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:this.firstNum="-"===this.firstNum[0]?this.firstNum.slice(1):"-"+this.firstNum;break;case t.CURR_NUM_TYPE.SECOND:this.secondNum||(this.secondNum="0"),this.secondNum="-"===this.secondNum[0]?this.secondNum.slice(1):"-"+this.secondNum;break;case t.CURR_NUM_TYPE.THIRD:this.thirdNum||(this.thirdNum="0"),this.thirdNum="-"===this.thirdNum[0]?this.thirdNum.slice(1):"-"+this.thirdNum}}addNumberToValue(i){let s=null;switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:s=this.firstNum.replace(/[.|-]/g,"").length,s<9&&(1===s&&"0"===this.firstNum[this.firstNum.length-1]?this.firstNum=this.firstNum.replace(/0/g,i):this.firstNum+=i);break;case t.CURR_NUM_TYPE.SECOND:s=this.secondNum.replace(/[.|-]/g,"").length,s<9&&(1===s&&"0"===this.secondNum[this.secondNum.length-1]?this.secondNum=this.secondNum.replace(/0/g,i):this.secondNum+=i);break;case t.CURR_NUM_TYPE.THIRD:s=this.thirdNum.replace(/[.|-]/g,"").length,s<9&&(1===s&&"0"===this.thirdNum[this.thirdNum.length-1]?this.thirdNum=i:this.thirdNum+=i)}}addCommaToValue(){let i=null;switch(this.currNum){case t.CURR_NUM_TYPE.FIRST:i=this.firstNum.replace(/[.|-]/g,"").length,!this.firstNum.includes(".")&&i<9&&(this.firstNum+=".");break;case t.CURR_NUM_TYPE.SECOND:i=this.secondNum.replace(/[.|-]/g,"").length,!this.secondNum.includes(".")&&i<9&&(this.secondNum+=".");break;case t.CURR_NUM_TYPE.THIRD:i=this.thirdNum.replace(/[.|-]/g,"").length,!this.thirdNum.includes(".")&&i<9&&(this.thirdNum+=".")}}calculateResult(){this._saveLastValues(),this._calculatedSecondOp(),this._calculateFirstOp();const t=this.firstNum,i=this.lastOp,s=this.lastNum;this.resetAllValues(),this.firstNum=t,this.lastOp=i,this.lastNum=s}_saveLastValues(){this.secondOp!==t.OP_TYPE.NONE?this.lastOp=this.secondOp:this.firstOp!==t.OP_TYPE.NONE&&(this.lastOp=this.firstOp),this.thirdNum?this.lastNum=this.thirdNum:this.secondNum?this.lastNum=this.secondNum:this.firstNum&&this.firstOp!==t.OP_TYPE.NONE&&(this.lastNum=this.firstNum)}_calculatedSecondOp(){switch(this.secondOp){case t.OP_TYPE.MULT:if(this.thirdNum){const t=Number(this.secondNum),i=Number(this.thirdNum);t*i>=Number.MAX_SAFE_INTEGER?this.secondNum="Infinity":t*i<=Number.MIN_SAFE_INTEGER?this.secondNum="-Infinity":this.secondNum=(t*i).toString()}else{const t=Number(this.secondNum);t*t>=Number.MAX_SAFE_INTEGER?this.secondNum="Infinity":t*t<=Number.MIN_SAFE_INTEGER?this.secondNum="-Infinity":this.secondNum=(t*t).toString()}break;case t.OP_TYPE.DIVISION:this.thirdNum?this.secondNum=(Number(this.secondNum)/Number(this.thirdNum)).toString():this.secondNum=(Number(this.secondNum)/Number(this.secondNum)).toString()}}_calculateFirstOp(){switch(this.firstOp){case t.OP_TYPE.NONE:this._calculateWithLastOp();break;case t.OP_TYPE.PLUS:if(this.secondNum){const t=Number(this.firstNum),i=Number(this.secondNum);t+i>=Number.MAX_SAFE_INTEGER?this.firstNum="Infinity":this.firstNum=(t+i).toString()}else{const t=Number(this.firstNum);t+t>=Number.MAX_SAFE_INTEGER?this.firstNum="Infinity":this.firstNum=(t+t).toString()}break;case t.OP_TYPE.MINUS:if(this.secondNum){const t=Number(this.firstNum),i=Number(this.secondNum);t-i<=Number.MIN_SAFE_INTEGER?this.firstNum="-Infinity":this.firstNum=(t-i).toString()}else{const t=Number(this.firstNum);t-t<=Number.MIN_SAFE_INTEGER?this.firstNum="-Infinity":this.firstNum=(t-t).toString()}break;case t.OP_TYPE.MULT:if(this.secondNum){const t=Number(this.firstNum),i=Number(this.secondNum);t*i>=Number.MAX_SAFE_INTEGER?this.firstNum="Infinity":t*i<=Number.MIN_SAFE_INTEGER?this.firstNum="-Infinity":this.firstNum=(t*i).toString()}else{const t=Number(this.firstNum);t*t>=Number.MAX_SAFE_INTEGER?this.firstNum="Infinity":t*t<=Number.MIN_SAFE_INTEGER?this.firstNum="-Infinity":this.firstNum=(t*t).toString()}break;case t.OP_TYPE.DIVISION:this.secondNum?this.firstNum=(Number(this.firstNum)/Number(this.secondNum)).toString():this.firstNum=(Number(this.firstNum)/Number(this.firstNum)).toString()}}_calculateWithLastOp(){const i=Number(this.firstNum),s=Number(this.lastNum);switch(this.lastOp){case t.OP_TYPE.PLUS:i+s>=Number.MAX_SAFE_INTEGER?this.firstNum="Infinity":this.firstNum=(i+s).toString();break;case t.OP_TYPE.MINUS:i-s<=Number.MIN_SAFE_INTEGER?this.firstNum="-Infinity":this.firstNum=(i-s).toString();break;case t.OP_TYPE.MULT:i*s>=Number.MAX_SAFE_INTEGER?this.firstNum="Infinity":i*s<=Number.MIN_SAFE_INTEGER?this.firstNum="-Infinity":this.firstNum=(i*s).toString();break;case t.OP_TYPE.DIVISION:this.firstNum=(i/s).toString()}}}const i=t;class s{static CLASS={GLOBAL_CONTAINER:"global-container",LIGHT_THEME:"light-theme",DARK_THEME:"dark-theme",CALCULATOR:{WRAPPER:"calculator",SPEC_BTN:"spec-operation-btn",BASIC_BTN:"basic-operation-btn",ACTIVE_BASIC_BTN:"active-operation-btn",DIGIT_BTN:"digit-btn",VALUE:"calculator__value",CLEAN:"calculator__clean-btn",SIGN_CHANGE:"calculator__sign-change-btn",PERCENT:"calculator__percent-btn",DIVISION:"calculator__division-btn",SEVEN:"calculator__seven-btn",EIGHT:"calculator__eight-btn",NINE:"calculator__nine-btn",MULT:"calculator__mult-btn",FOUR:"calculator__four-btn",FIVE:"calculator__five-btn",SIX:"calculator__six-btn",MINUS:"calculator__minus-btn",ONE:"calculator__one-btn",TWO:"calculator__two-btn",THREE:"calculator__three-btn",PLUS:"calculator__plus-btn",NULL:"calculator__null-btn",COMMA:"calculator__comma-btn",CALC:"calculator__calc-btn"}};static ID={SWITCH_THEME:"theme-switch"};static DATA_ATTRIBUTE={CALCULATOR:{BTN_TYPE:{KEBAB:"btn-type",CAMEL:"btnType"}}};getGlobalContainer(){return document.querySelector(`.${s.CLASS.GLOBAL_CONTAINER}`)}getSwitchThemeInput(){return document.querySelector(`#${s.ID.SWITCH_THEME}`)}getCalculatorWrapper(){return document.querySelector(`.${s.CLASS.CALCULATOR.WRAPPER}`)}setCalculatorValue(t){return document.querySelector(`.${s.CLASS.CALCULATOR.VALUE}`).textContent=this._formatNumForOutput(t),this}setCleanBtnState(t){return document.querySelector(`.${s.CLASS.CALCULATOR.CLEAN}`).textContent=t,this}cleanAllOperationBtns(){return document.querySelectorAll(`.${s.CLASS.CALCULATOR.BASIC_BTN}`).forEach((t=>t.classList.remove(s.CLASS.CALCULATOR.ACTIVE_BASIC_BTN))),this}makeOperationBtnActive(t){return this.cleanAllOperationBtns(),document.querySelector(`.${t}`).classList.add(s.CLASS.CALCULATOR.ACTIVE_BASIC_BTN),this}_formatNumForOutput(t){return"Infinity"===t||"-Infinity"===t?"Error":this._addSpacesForIntPart(t.replace(/\./g,","))}_addSpacesForIntPart(t){if(t.includes(",")){const[i,s]=t.split(",");return`${parseInt(i).toLocaleString().replace(/,/g," ")},${s}`}return parseInt(t).toLocaleString().replace(/,/g," ")}}const e=s,r=class{constructor(t,i){this.view=t,this.model=i,this.cleanBtnState="AC"}init(){this._setSwitchThemeBtnListener(),this._setCalculatorBtnsListener()}_setSwitchThemeBtnListener(){this.view.getSwitchThemeInput().addEventListener("change",this._onSwitchThemeBtnClicked.bind(this))}_onSwitchThemeBtnClicked(){const t=this.view.getGlobalContainer();t.classList.toggle(e.CLASS.LIGHT_THEME),t.classList.toggle(e.CLASS.DARK_THEME)}_setCalculatorBtnsListener(){this.view.getCalculatorWrapper().addEventListener("click",this._onCalculatorClicked.bind(this))}_onCalculatorClicked(t){const s=t.target;if(s.dataset[e.DATA_ATTRIBUTE.CALCULATOR.BTN_TYPE.CAMEL])switch(s.dataset[e.DATA_ATTRIBUTE.CALCULATOR.BTN_TYPE.CAMEL]){case i.BTN_TYPE.CLEAN:this._cleanBtnClicked();break;case i.BTN_TYPE.PLUS:this._plusBtnClicked();break;case i.BTN_TYPE.MINUS:this._minusBtnClicked();break;case i.BTN_TYPE.MULT:this._multBtnClicked();break;case i.BTN_TYPE.DIVISION:this._divisionBtnClicked();break;case i.BTN_TYPE.PERCENT:this._percentBtnClicked();break;case i.BTN_TYPE.SIGN_CHANGE:this._signChangeValueBtnClicked();break;case i.BTN_TYPE.ONE:this._digitBtnClicked("1");break;case i.BTN_TYPE.TWO:this._digitBtnClicked("2");break;case i.BTN_TYPE.THREE:this._digitBtnClicked("3");break;case i.BTN_TYPE.FOUR:this._digitBtnClicked("4");break;case i.BTN_TYPE.FIVE:this._digitBtnClicked("5");break;case i.BTN_TYPE.SIX:this._digitBtnClicked("6");break;case i.BTN_TYPE.SEVEN:this._digitBtnClicked("7");break;case i.BTN_TYPE.EIGHT:this._digitBtnClicked("8");break;case i.BTN_TYPE.NINE:this._digitBtnClicked("9");break;case i.BTN_TYPE.NULL:this._nullBtnClicked();break;case i.BTN_TYPE.COMMA:this._commaBtnClicked();break;case i.BTN_TYPE.CALC:this._calcBtnClicked()}}_showCurrentNum(){switch(this.model.currNum){case i.CURR_NUM_TYPE.FIRST:this.view.setCalculatorValue(this.model.firstNum);break;case i.CURR_NUM_TYPE.SECOND:this.view.setCalculatorValue(this.model.secondNum);break;case i.CURR_NUM_TYPE.THIRD:this.view.setCalculatorValue(this.model.thirdNum)}}_showCurrentOperation(){if(this.model.secondOp!==i.OP_TYPE.NONE)switch(this.model.secondOp){case i.OP_TYPE.MULT:this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.MULT);break;case i.OP_TYPE.DIVISION:this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.DIVISION)}else if(this.model.firstOp!==i.OP_TYPE.NONE)switch(this.model.firstOp){case i.OP_TYPE.PLUS:this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.PLUS);break;case i.OP_TYPE.MINUS:this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.MINUS);break;case i.OP_TYPE.MULT:this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.MULT);break;case i.OP_TYPE.DIVISION:this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.DIVISION)}}_cleanBtnClicked(){if("C"===this.cleanBtnState){switch(this.model.currNum){case i.CURR_NUM_TYPE.FIRST:this.model.cleanFirstNum(),this.view.setCalculatorValue(this.model.firstNum);break;case i.CURR_NUM_TYPE.SECOND:this.model.cleanSecondNum(),this.view.setCalculatorValue(this.model.secondNum);break;case i.CURR_NUM_TYPE.THIRD:this.model.cleanThirdNum(),this.view.setCalculatorValue(this.model.thirdNum)}this.cleanBtnState="AC",this.view.setCleanBtnState(this.cleanBtnState),this._showCurrentOperation()}else this.model.resetAllValues(),this.view.cleanAllOperationBtns(),this.view.setCalculatorValue(this.model.firstNum)}_plusBtnClicked(){this.model.setPlusSign()===i.FULL_CALC_DONE&&this.view.setCalculatorValue(this.model.firstNum),this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.PLUS)}_minusBtnClicked(){this.model.setMinusSign()===i.FULL_CALC_DONE&&this.view.setCalculatorValue(this.model.firstNum),this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.MINUS)}_multBtnClicked(){const t=this.model.setMultSign();t===i.FULL_CALC_DONE?this.view.setCalculatorValue(this.model.firstNum):t===i.MULT_DIV_CALC_DONE&&this.view.setCalculatorValue(this.model.secondNum),this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.MULT)}_divisionBtnClicked(){const t=this.model.setDivisionSign();t===i.FULL_CALC_DONE?this.view.setCalculatorValue(this.model.firstNum):t===i.MULT_DIV_CALC_DONE&&this.view.setCalculatorValue(this.model.secondNum),this.view.makeOperationBtnActive(e.CLASS.CALCULATOR.DIVISION)}_percentBtnClicked(){this.model.getValuePercent(),this._showCurrentNum()}_signChangeValueBtnClicked(){this.model.changeValueSign(),this._showCurrentNum()}_digitBtnClicked(t){this.model.addNumberToValue(t),this.cleanBtnState="C",this.view.setCleanBtnState(this.cleanBtnState),this._showCurrentNum(),this.view.cleanAllOperationBtns()}_nullBtnClicked(){switch(this.model.addNumberToValue("0"),this.model.currNum){case i.CURR_NUM_TYPE.FIRST:"0"!==this.model.firstNum&&(this.cleanBtnState="C",this.view.setCleanBtnState(this.cleanBtnState));break;case i.CURR_NUM_TYPE.SECOND:"0"!==this.model.secondNum&&(this.cleanBtnState="C",this.view.setCleanBtnState(this.cleanBtnState));break;case i.CURR_NUM_TYPE.THIRD:"0"!==this.model.thirdNum&&(this.cleanBtnState="C",this.view.setCleanBtnState(this.cleanBtnState))}this._showCurrentNum(),this.view.cleanAllOperationBtns()}_commaBtnClicked(){this.model.addCommaToValue(),this.cleanBtnState="C",this.view.setCleanBtnState(this.cleanBtnState),this._showCurrentNum(),this.view.cleanAllOperationBtns()}_calcBtnClicked(){this.model.calculateResult(),this.view.setCalculatorValue(this.model.firstNum),this.view.cleanAllOperationBtns()}};document.addEventListener("DOMContentLoaded",(()=>{new r(new e,new i).init()}))})();
//# sourceMappingURL=bundle.js.map